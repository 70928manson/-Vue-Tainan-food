"use strict";(self["webpackChunkfood"]=self["webpackChunkfood"]||[]).push([[484],{8484:function(t,o,e){e.r(o),e.d(o,{default:function(){return G}});var s=e(3396),l=e(7139),a=e(605);const n={class:"container"},c={class:"mt-3"},r=(0,s._)("h3",{class:"mt-3 mb-4"},"購物清單",-1),i={class:"row"},d={class:"col-md-8"},u={class:"table"},b=(0,s._)("thead",null,[(0,s._)("tr",null,[(0,s._)("img",{src:a,alt:""}),(0,s._)("th",{scope:"col",class:"border-0 ps-0"},"產品"),(0,s._)("th",{scope:"col",class:"border-0"},"數量"),(0,s._)("th",{scope:"col",class:"border-0"},"價錢")])],-1),p={scope:"row",class:"border-0 px-0 font-weight-normal py-4"},h=["src"],m={class:"mb-0 fw-bold ms-3 d-inline-block"},_={class:"border-0 align-middle",style:{"max-width":"160px"}},g={class:"input-group pe-5"},w={class:"input-group-prepend numChangeField"},f=["onClick"],x=(0,s._)("i",{class:"bi bi-caret-up-fill"},null,-1),v=[x],y=["value"],C={class:"input-group-append"},k=["onClick"],$=(0,s._)("i",{class:"bi bi-caret-down-fill"},null,-1),B=[$],D={class:"border-0 align-middle"},T={class:"mb-0 ms-auto"},q={class:"border-0 align-middle"},z={class:"btn btn-outline-dark border-0 py-2"},N=["onClick"],Q={class:"col-md-4"},j={class:"border p-4 mb-4"},S=(0,s._)("h4",{class:"fw-bold mb-4"},"Order Detail",-1),Y={class:"table text-muted border-bottom"},I=(0,s._)("th",{scope:"row",class:"border-0 px-0 pt-4 font-weight-normal"},"小計",-1),P={class:"text-end border-0 px-0 pt-4"},U=(0,s._)("tr",null,[(0,s._)("th",{scope:"row",class:"border-0 px-0 pt-0 pb-4 font-weight-normal"},"運費"),(0,s._)("td",{class:"text-end border-0 px-0 pt-0 pb-4"},"NT$30")],-1),E={class:"d-flex justify-content-between mt-4"},F=(0,s._)("p",{class:"mb-0 h4 fw-bold"},"Total",-1),H={class:"mb-0 h4 fw-bold"},K=(0,s.Uk)("填寫寄送資料");function O(t,o,e,a,x,$){const O=(0,s.up)("router-link");return(0,s.wg)(),(0,s.iD)("div",n,[(0,s._)("div",c,[r,(0,s._)("div",i,[(0,s._)("div",d,[(0,s._)("table",u,[b,(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(x.carts,(t=>((0,s.wg)(),(0,s.iD)("tr",{class:"border-bottom border-top",key:t.id},[(0,s._)("th",p,[(0,s._)("img",{src:t.product.imageUrl,alt:"",style:{width:"72px",height:"72px","object-fit":"cover"}},null,8,h),(0,s._)("p",m,(0,l.zw)(t.product.title),1)]),(0,s._)("td",_,[(0,s._)("div",g,[(0,s._)("div",w,[(0,s._)("button",{class:"btn btn-outline-dark border-0 py-2 addItemBtn",onClick:o=>$.addCartQty(t.product.id,t.qty),type:"button",id:"button-addon1"},v,8,f)]),(0,s._)("input",{type:"text",class:"form-control border-0 text-center my-auto shadow-none",placeholder:"","aria-label":"Example text with button addon","aria-describedby":"button-addon1",value:t.qty},null,8,y),(0,s._)("div",C,[(0,s._)("button",{class:"btn btn-outline-dark border-0 py-2 reduceItemBtn",onClick:o=>$.reduceCartQty(t.product.id,t.qty,t.id),type:"button",id:"button-addon2"},B,8,k)])])]),(0,s._)("td",D,[(0,s._)("p",T,"NT$"+(0,l.zw)(t.total),1)]),(0,s._)("td",q,[(0,s._)("div",null,[(0,s._)("button",z,[(0,s._)("i",{class:"bi bi-x",style:{fontSize:"175%"},onClick:o=>$.deleteProduct(t.id)},null,8,N)])])])])))),128))])])]),(0,s._)("div",Q,[(0,s._)("div",j,[S,(0,s._)("table",Y,[(0,s._)("tbody",null,[(0,s._)("tr",null,[I,(0,s._)("td",P,"NT$"+(0,l.zw)(x.total.total),1)]),U])]),(0,s._)("div",E,[F,(0,s._)("p",H,"NT$"+(0,l.zw)(x.total.final_total+30),1)]),(0,s.Wm)(O,{class:"btn btn-dark w-100 mt-4",to:"/checkout"},{default:(0,s.w5)((()=>[K])),_:1})])])])])])}var W={data(){return{carts:[],total:[]}},methods:{getCartsData(){const t="https://vue3-course-api.hexschool.io/v2/api/manson972/cart";this.$http.get(t).then((t=>{console.log(t),this.carts=t.data.data.carts,this.total=t.data.data,console.log(this.total)}))},addCartQty(t,o){const e="https://vue3-course-api.hexschool.io/v2/api/manson972/cart",s={product_id:t,qty:1};this.$http.post(e,{data:s}).then((t=>{console.log(t),this.getCartsData()}))},reduceCartQty(t,o,e){const s=this.$swal.mixin({customClass:{confirmButton:"btn btn-success",cancelButton:"btn btn-danger"},buttonsStyling:!1}),l="https://vue3-course-api.hexschool.io/v2/api/manson972/cart",a={product_id:t,qty:-1};o-1>0?this.$http.post(l,{data:a}).then((t=>{console.log(t),this.getCartsData()})):this.$swal({title:"確定移除此產品嘛?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonText:"確定",cancelButtonText:"否",reverseButtons:!0}).then((t=>{t.isConfirmed&&(s.fire("Deleted!","刪除成功!","success"),this.$http.delete(`${l}/${e}`).then((t=>{console.log(t),this.getCartsData()})))}))},deleteProduct(t){console.log("a");const o=this.$swal.mixin({customClass:{confirmButton:"btn btn-success",cancelButton:"btn btn-danger"},buttonsStyling:!1}),e="https://vue3-course-api.hexschool.io/v2/api/manson972/cart";this.$swal({title:"確定移除此產品嘛?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonText:"確定",cancelButtonText:"否",reverseButtons:!0}).then((s=>{s.isConfirmed&&(o.fire("Deleted!","刪除成功!","success"),this.$http.delete(`${e}/${t}`).then((t=>{console.log(t),this.getCartsData()})))}))}},mounted(){this.getCartsData()}},Z=e(89);const A=(0,Z.Z)(W,[["render",O]]);var G=A},605:function(t,o,e){t.exports=e.p+"img/boxes.5f46f9d6.jpg"}}]);
//# sourceMappingURL=484.e3a8e933.js.map