"use strict";(self["webpackChunkfood"]=self["webpackChunkfood"]||[]).push([[624],{1624:function(t,s,o){o.r(s),o.d(s,{default:function(){return W}});var e=o(3396),a=o(7139);const l={class:"container"},n={class:"mt-3"},r=(0,e._)("h3",{class:"mt-3 mb-4"},"購物清單",-1),c={class:"row"},d={class:"col-md-8"},i={class:"table"},u=(0,e._)("thead",null,[(0,e._)("tr",null,[(0,e._)("th",{scope:"col",class:"border-0 ps-0"},"產品"),(0,e._)("th",{scope:"col",class:"border-0"},"數量"),(0,e._)("th",{scope:"col",class:"border-0"},"價錢")])],-1),p={scope:"row",class:"border-0 px-0 font-weight-normal py-4"},b=["src"],h={class:"mb-0 fw-bold ms-3 d-inline-block"},m={class:"border-0 align-middle",style:{"max-width":"160px"}},_={class:"input-group pe-5"},w={class:"input-group-prepend numChangeField"},f=["onClick"],g=(0,e._)("i",{class:"bi bi-caret-up-fill"},null,-1),y=[g],v=["value"],x={class:"input-group-append"},C=["onClick"],k=(0,e._)("i",{class:"bi bi-caret-down-fill"},null,-1),$=[k],D={class:"border-0 align-middle"},B={class:"mb-0 ms-auto"},T=(0,e._)("td",{class:"border-0 align-middle"},[(0,e._)("i",{class:"fas fa-times"})],-1),q={class:"col-md-4"},z={class:"border p-4 mb-4"},N=(0,e._)("h4",{class:"fw-bold mb-4"},"Order Detail",-1),Q={class:"table text-muted border-bottom"},Y=(0,e._)("th",{scope:"row",class:"border-0 px-0 pt-4 font-weight-normal"},"小計",-1),j={class:"text-end border-0 px-0 pt-4"},I=(0,e._)("tr",null,[(0,e._)("th",{scope:"row",class:"border-0 px-0 pt-0 pb-4 font-weight-normal"},"運費"),(0,e._)("td",{class:"text-end border-0 px-0 pt-0 pb-4"},"NT$30")],-1),U={class:"d-flex justify-content-between mt-4"},E=(0,e._)("p",{class:"mb-0 h4 fw-bold"},"Total",-1),F={class:"mb-0 h4 fw-bold"},H=(0,e.Uk)("填寫寄送資料");function K(t,s,o,g,k,K){const O=(0,e.up)("router-link");return(0,e.wg)(),(0,e.iD)("div",l,[(0,e._)("div",n,[r,(0,e._)("div",c,[(0,e._)("div",d,[(0,e._)("table",i,[u,(0,e._)("tbody",null,[((0,e.wg)(!0),(0,e.iD)(e.HY,null,(0,e.Ko)(k.carts,(t=>((0,e.wg)(),(0,e.iD)("tr",{class:"border-bottom border-top",key:t.id},[(0,e._)("th",p,[(0,e._)("img",{src:t.product.imageUrl,alt:"",style:{width:"72px",height:"72px","object-fit":"cover"}},null,8,b),(0,e._)("p",h,(0,a.zw)(t.product.title),1)]),(0,e._)("td",m,[(0,e._)("div",_,[(0,e._)("div",w,[(0,e._)("button",{class:"btn btn-outline-dark border-0 py-2 addItemBtn",onClick:s=>K.addCartQty(t.product.id,t.qty),type:"button",id:"button-addon1"},y,8,f)]),(0,e._)("input",{type:"text",class:"form-control border-0 text-center my-auto shadow-none",placeholder:"","aria-label":"Example text with button addon","aria-describedby":"button-addon1",value:t.qty},null,8,v),(0,e._)("div",x,[(0,e._)("button",{class:"btn btn-outline-dark border-0 py-2 reduceItemBtn",onClick:s=>K.reduceCartQty(t.product.id,t.qty,t.id),type:"button",id:"button-addon2"},$,8,C)])])]),(0,e._)("td",D,[(0,e._)("p",B,"NT$"+(0,a.zw)(t.total),1)]),T])))),128))])])]),(0,e._)("div",q,[(0,e._)("div",z,[N,(0,e._)("table",Q,[(0,e._)("tbody",null,[(0,e._)("tr",null,[Y,(0,e._)("td",j,"NT$"+(0,a.zw)(k.total.total),1)]),I])]),(0,e._)("div",U,[E,(0,e._)("p",F,"NT$"+(0,a.zw)(k.total.final_total+30),1)]),(0,e.Wm)(O,{class:"btn btn-dark w-100 mt-4",to:"/checkout"},{default:(0,e.w5)((()=>[H])),_:1})])])])])])}var O={data(){return{carts:[],total:[]}},methods:{getCartsData(){const t="https://vue3-course-api.hexschool.io/v2/api/manson972/cart";this.$http.get(t).then((t=>{console.log(t),this.carts=t.data.data.carts,this.total=t.data.data,console.log(this.total)}))},addCartQty(t,s){const o="https://vue3-course-api.hexschool.io/v2/api/manson972/cart",e={product_id:t,qty:1};this.$http.post(o,{data:e}).then((t=>{console.log(t),this.getCartsData()}))},reduceCartQty(t,s,o){const e=this.$swal.mixin({customClass:{confirmButton:"btn btn-success",cancelButton:"btn btn-danger"},buttonsStyling:!1}),a="https://vue3-course-api.hexschool.io/v2/api/manson972/cart",l={product_id:t,qty:-1};s-1>0?this.$http.post(a,{data:l}).then((t=>{console.log(t),this.getCartsData()})):this.$swal({title:"確定移除此產品嘛?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonText:"確定",cancelButtonText:"否",reverseButtons:!0}).then((t=>{t.isConfirmed?(e.fire("Deleted!","刪除成功!","success"),this.$http.delete(`${a}/${o}`).then((t=>{console.log(t),this.getCartsData()}))):t.dismiss===this.$swal.DismissReason.cancel&&e.fire("Cancelled","Your imaginary file is safe :)","error")}))}},mounted(){this.getCartsData()}},R=o(89);const S=(0,R.Z)(O,[["render",K]]);var W=S}}]);
//# sourceMappingURL=624.89d72ac2.js.map