"use strict";(self["webpackChunkfood"]=self["webpackChunkfood"]||[]).push([[76],{2076:function(t,o,e){e.r(o),e.d(o,{default:function(){return A}});var s=e(3396),l=e(7139);const a={class:"container"},n={class:"mt-3"},c=(0,s._)("h3",{class:"mt-3 mb-4"},"購物清單",-1),r={class:"row"},i={class:"col-md-8"},d={class:"table"},u=(0,s._)("thead",null,[(0,s._)("tr",null,[(0,s._)("th",{scope:"col",class:"border-0 ps-0"},"產品"),(0,s._)("th",{scope:"col",class:"border-0"},"數量"),(0,s._)("th",{scope:"col",class:"border-0"},"價錢")])],-1),b={scope:"row",class:"border-0 px-0 font-weight-normal py-4"},p=["src"],h={class:"mb-0 fw-bold ms-3 d-inline-block"},m={class:"border-0 align-middle",style:{"max-width":"160px"}},_={class:"input-group pe-5"},w={class:"input-group-prepend numChangeField"},g=["onClick"],f=(0,s._)("i",{class:"bi bi-caret-up-fill"},null,-1),x=[f],v=["value"],y={class:"input-group-append"},C=["onClick"],k=(0,s._)("i",{class:"bi bi-caret-down-fill"},null,-1),$=[k],B={class:"border-0 align-middle"},D={class:"mb-0 ms-auto"},T={class:"border-0 align-middle"},q={class:"btn btn-outline-dark border-0 py-2"},z=["onClick"],N={class:"col-md-4"},Q={class:"border p-4 mb-4"},S=(0,s._)("h4",{class:"fw-bold mb-4"},"Order Detail",-1),Y={class:"table text-muted border-bottom"},j=(0,s._)("th",{scope:"row",class:"border-0 px-0 pt-4 font-weight-normal"},"小計",-1),I={class:"text-end border-0 px-0 pt-4"},P=(0,s._)("tr",null,[(0,s._)("th",{scope:"row",class:"border-0 px-0 pt-0 pb-4 font-weight-normal"},"運費"),(0,s._)("td",{class:"text-end border-0 px-0 pt-0 pb-4"},"NT$30")],-1),U={class:"d-flex justify-content-between mt-4"},E=(0,s._)("p",{class:"mb-0 h4 fw-bold"},"Total",-1),F={class:"mb-0 h4 fw-bold"},H=(0,s.Uk)("填寫寄送資料");function K(t,o,e,f,k,K){const O=(0,s.up)("router-link");return(0,s.wg)(),(0,s.iD)("div",a,[(0,s._)("div",n,[c,(0,s._)("div",r,[(0,s._)("div",i,[(0,s._)("table",d,[u,(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(k.carts,(t=>((0,s.wg)(),(0,s.iD)("tr",{class:"border-bottom border-top",key:t.id},[(0,s._)("th",b,[(0,s._)("img",{src:t.product.imageUrl,alt:"",style:{width:"72px",height:"72px","object-fit":"cover"}},null,8,p),(0,s._)("p",h,(0,l.zw)(t.product.title),1)]),(0,s._)("td",m,[(0,s._)("div",_,[(0,s._)("div",w,[(0,s._)("button",{class:"btn btn-outline-dark border-0 py-2 addItemBtn",onClick:o=>K.addCartQty(t.product.id,t.qty),type:"button",id:"button-addon1"},x,8,g)]),(0,s._)("input",{type:"text",class:"form-control border-0 text-center my-auto shadow-none",placeholder:"","aria-label":"Example text with button addon","aria-describedby":"button-addon1",value:t.qty},null,8,v),(0,s._)("div",y,[(0,s._)("button",{class:"btn btn-outline-dark border-0 py-2 reduceItemBtn",onClick:o=>K.reduceCartQty(t.product.id,t.qty,t.id),type:"button",id:"button-addon2"},$,8,C)])])]),(0,s._)("td",B,[(0,s._)("p",D,"NT$"+(0,l.zw)(t.total),1)]),(0,s._)("td",T,[(0,s._)("div",null,[(0,s._)("button",q,[(0,s._)("i",{class:"bi bi-x",style:{fontSize:"175%"},onClick:o=>K.deleteProduct(t.id)},null,8,z)])])])])))),128))])])]),(0,s._)("div",N,[(0,s._)("div",Q,[S,(0,s._)("table",Y,[(0,s._)("tbody",null,[(0,s._)("tr",null,[j,(0,s._)("td",I,"NT$"+(0,l.zw)(k.total.total),1)]),P])]),(0,s._)("div",U,[E,(0,s._)("p",F,"NT$"+(0,l.zw)(k.total.final_total+30),1)]),(0,s.Wm)(O,{class:"btn btn-dark w-100 mt-4",to:"/checkout"},{default:(0,s.w5)((()=>[H])),_:1})])])])])])}var O={data(){return{carts:[],total:[]}},methods:{getCartsData(){const t="https://vue3-course-api.hexschool.io/v2/api/manson972/cart";this.$http.get(t).then((t=>{console.log(t),this.carts=t.data.data.carts,this.total=t.data.data,console.log(this.total)}))},addCartQty(t,o){const e="https://vue3-course-api.hexschool.io/v2/api/manson972/cart",s={product_id:t,qty:1};this.$http.post(e,{data:s}).then((t=>{console.log(t),this.getCartsData()}))},reduceCartQty(t,o,e){const s=this.$swal.mixin({customClass:{confirmButton:"btn btn-success",cancelButton:"btn btn-danger"},buttonsStyling:!1}),l="https://vue3-course-api.hexschool.io/v2/api/manson972/cart",a={product_id:t,qty:-1};o-1>0?this.$http.post(l,{data:a}).then((t=>{console.log(t),this.getCartsData()})):this.$swal({title:"確定移除此產品嘛?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonText:"確定",cancelButtonText:"否",reverseButtons:!0}).then((t=>{t.isConfirmed&&(s.fire("Deleted!","刪除成功!","success"),this.$http.delete(`${l}/${e}`).then((t=>{console.log(t),this.getCartsData()})))}))},deleteProduct(t){console.log("a");const o=this.$swal.mixin({customClass:{confirmButton:"btn btn-success",cancelButton:"btn btn-danger"},buttonsStyling:!1}),e="https://vue3-course-api.hexschool.io/v2/api/manson972/cart";this.$swal({title:"確定移除此產品嘛?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonText:"確定",cancelButtonText:"否",reverseButtons:!0}).then((s=>{s.isConfirmed&&(o.fire("Deleted!","刪除成功!","success"),this.$http.delete(`${e}/${t}`).then((t=>{console.log(t),this.getCartsData()})))}))}},mounted(){this.getCartsData()}},W=e(89);const Z=(0,W.Z)(O,[["render",K]]);var A=Z}}]);
//# sourceMappingURL=76.5b7008df.js.map